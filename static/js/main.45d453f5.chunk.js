(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{101:function(e,t,n){e.exports={state:"State_state__QKTrR",normal:"State_normal__3t54K",active:"State_active__3L6ZB"}},109:function(e,t,n){e.exports={header:"header_header__2Cqvf"}},115:function(e,t,n){e.exports={dropCommon:"ClearEffect_dropCommon__21ygH",drop0:"ClearEffect_drop0__aq8hW",drip0:"ClearEffect_drip0__VLuA7",drop45:"ClearEffect_drop45__3TacX",drip45:"ClearEffect_drip45__2Fgyk",drop90:"ClearEffect_drop90__2vT1_",drip90:"ClearEffect_drip90__3HLEH",drop135:"ClearEffect_drop135__XgStZ",drip135:"ClearEffect_drip135__3Np53",drop180:"ClearEffect_drop180__Vbd2g",drip180:"ClearEffect_drip180__2z1_J",drop225:"ClearEffect_drop225__2I2oQ",drip225:"ClearEffect_drip225__Gwk-7",drop270:"ClearEffect_drop270__3AJcZ",drip270:"ClearEffect_drip270__3atKl",drop315:"ClearEffect_drop315__3dn9P",drip315:"ClearEffect_drip315__15AU0"}},133:function(e,t,n){e.exports={actionBar:"ActionBar_actionBar__3FK6c","action-bar-wrapper":"ActionBar_action-bar-wrapper__mQlk7","input-sequence-area":"ActionBar_input-sequence-area__1Ofh2","input-sequence-lbl":"ActionBar_input-sequence-lbl__3QWPT","input-sequence":"ActionBar_input-sequence__puxBj","btn-area":"ActionBar_btn-area__3lRB-"}},143:function(e,t,n){e.exports={transition:"Transition_transition__1_xC2"}},144:function(e,t,n){e.exports={contextmenu:"ContextMenu_contextmenu__3D9GI"}},188:function(e,t,n){e.exports=n(229)},193:function(e,t,n){},195:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){e.exports={failed:"Animation_failed__30m8M","failed-animation":"Animation_failed-animation__3Yw45"}},229:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(15),o=n.n(c),i=(n(193),n(6)),s=n.n(i),l=n(12),u=n(13),p=(n(195),n(109)),f=n.n(p),m=r.a.createContext({id:"",displayName:""}),d=n(263),g=n(264),x=n(272),v=n(277),h=n(268),E=n(269),y=n(271),b=n(270),_=n(231),w=n(135),k=n.n(w).a.create({baseURL:"http://localhost:5000/",headers:{"Content-Type":"application/json"},withCredentials:!0,responseType:"json"});function C(){return S.apply(this,arguments)}function S(){return(S=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get("/user/current_user");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function O(){return j.apply(this,arguments)}function j(){return(j=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.post("/user/delete/current_user");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function T(e,t){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.post("/user/save_automaton/".concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function q(e){return N.apply(this,arguments)}function N(){return(N=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get("/user/load_automaton/".concat(t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function A(e){var t=new URLSearchParams({response_type:"code",client_id:"421616892543-hr1gr8bjn5o9ivk7q4j5c7rg2dcpc8eo.apps.googleusercontent.com",scope:"openid profile",redirect_uri:"http://localhost:5000/redirect-url",state:e});return"".concat("https://accounts.google.com/o/oauth2/v2/auth","?").concat(t.toString())}function M(){return P.apply(this,arguments)}function P(){return(P=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get("/get_state");case 3:return t=e.sent,console.log(t),e.abrupt("return",t.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function L(){return B.apply(this,arguments)}function B(){return(B=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get("/get/twitter_token");case 3:return t=e.sent,console.log(t),e.abrupt("return",t.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function D(e){try{var t=new URLSearchParams({oauth_token:e});return"".concat("https://api.twitter.com/oauth/authenticate","?").concat(t.toString())}catch(n){console.log(n)}}function H(){return R.apply(this,arguments)}function R(){return(R=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get("/logout");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var W=n(296),F=n(276),z=n(274),K=n(275),Q=n(273);var G=function(e){var t=a.useContext(m),n=Object(d.a)(),r=n.t,c=(n.i18n,a.useState(!1)),o=Object(u.a)(c,2),i=o[0],p=o[1],w=a.useState(!1),k=Object(u.a)(w,2),C=k[0],S=k[1],j=a.useRef(null),T=function(){p((function(e){return!e}))},I=function(e){j.current&&j.current.contains(e.target)||p(!1)},q=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(),e.next=3,H();case 3:window.location.reload(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){T(),S(!0)},A=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!1),e.next=3,O();case 3:window.location.reload(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=t?function(){return a.createElement(g.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:T,ref:j,style:{width:"70%"},variant:"outlined",color:"default"},t.displayName)}:function(){return a.createElement(g.a,{onClick:function(){return e.setShowLoginModal((function(e){return!e}))},variant:"outlined"},"\u30ed\u30b0\u30a4\u30f3")};return a.createElement(v.a,{container:!0,spacing:3,alignItems:"center",justify:"center",id:"appTitle"},a.createElement(v.a,{item:!0,sm:12},a.createElement(v.a,{container:!0,spacing:1,alignItems:"center",justify:"center",style:{background:"white",borderRadius:"5px",marginTop:"20px"}},a.createElement(v.a,{item:!0,sm:9},a.createElement("h1",{style:{textAlign:"center"},className:f.a.header},r("appTitle"))),a.createElement(v.a,{item:!0,sm:3,style:{textAlign:"center",paddingRight:"20px"}},M(),a.createElement(h.a,{open:i,anchorEl:j.current,role:void 0,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps,n=e.placement;return a.createElement(E.a,Object.assign({},t,{style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),a.createElement(_.a,{elevation:3},a.createElement(b.a,{onClickAway:I},a.createElement(y.a,{autoFocusItem:i,id:"menu-list-grow"},a.createElement(x.a,{onClick:q},r("header.logout")),a.createElement(x.a,{onClick:N},r("header.removeAccount"))))))})),a.createElement(W.a,{open:C,onClose:function(){return S(!1)}},a.createElement(Q.a,null,r("header.removeAccountDialog.title")),a.createElement(z.a,null,a.createElement(K.a,null,r("header.removeAccountDialog.message"))),a.createElement(F.a,null,a.createElement(g.a,{onClick:function(){return S(!1)},color:"default"},r("header.cancel")),a.createElement(g.a,{onClick:A,variant:"contained",color:"secondary"},r("header.removeAccount"))))))))},J=n(60),U=n(278),X=n(279),Y=n(76);var V=function(){var e=function(e){return r.a.createElement(U.a,{style:{background:"#fff3ee"}},r.a.createElement(X.a,{style:{textAlign:"center",overflow:"hidden"}},r.a.createElement("i",{className:"fas fa-heart",style:{fontSize:"25px",float:"right",color:"pink"}}),r.a.createElement("i",{className:"far fa-heart",style:{fontSize:"25px",float:"right",color:"pink"}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("i",{className:e.iconClass,style:{fontSize:"45px"}}),r.a.createElement(Y.a,{color:"textSecondary",gutterBottom:!0,style:{marginTop:"8px"}},e.title)))},t=[{iconClass:"fas fa-shuttle-van"},{iconClass:"far fa-keyboard"},{iconClass:"fas fa-shuttle-van"},{iconClass:"fas fa-shuttle-van"},{iconClass:"fas fa-shuttle-van"},{iconClass:"fas fa-shuttle-van"},{iconClass:"fas fa-shuttle-van"},{iconClass:"fas fa-shuttle-van"}].map((function(t,n){return r.a.createElement(v.a,{item:!0,sm:3,key:n+1},r.a.createElement(J.b,{to:"/play/".concat(n+1),style:{textDecoration:"none"}},r.a.createElement(e,{title:"\u30ec\u30d9\u30eb ".concat(n+1),iconClass:t.iconClass})))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{container:!0,spacing:4},r.a.createElement(v.a,{item:!0,sm:12},r.a.createElement(v.a,{container:!0,alignItems:"center",justify:"center",spacing:1,style:{marginTop:"20px",paddingTop:"40px",background:"white",borderRadius:"5px"}},r.a.createElement(v.a,{item:!0,sm:4,style:{textAlign:"center"}},r.a.createElement(g.a,{variant:"outlined",color:"primary",style:{width:"80%",height:"60px"}},"\u30aa\u30fc\u30c8\u30de\u30c8\u30f3\u3068\u306f")),r.a.createElement(v.a,{item:!0,sm:4,style:{textAlign:"center"}},r.a.createElement(g.a,{variant:"outlined",color:"primary",style:{width:"80%",height:"60px"}},"\u30d7\u30ec\u30a4\u65b9\u6cd5")),r.a.createElement(v.a,{container:!0,spacing:4,alignItems:"center",style:{margin:"20px 0px",padding:"20px"}},t)))))},$=n(17),Z=(n(222),n(58)),ee=n(233),te=n(281),ne=n(280),ae=n(232);var re=function(e){var t=Object(d.a)(),n=t.t,r=(t.i18n,function(t){var n=e.sequenceStatusList.find((function(e){return e.id===t}));if(!n)return{icon:"far fa-circle",className:""};var a=n.status;return"success"===a?{icon:"far fa-check-circle",className:Z.bgSuccess}:"failed"===a?{icon:"far fa-times-circle",className:Z.bgFailed}:"playing"===a?{icon:"far fa-play-circle "+Z.playingAnimation,className:Z.bgPlaying}:{icon:"far fa-circle",className:""}});return a.createElement(_.a,{elevation:3,style:{padding:"10px 3px 3px 10px",marginTop:"15px"}},a.createElement("h4",{style:{verticalAlign:"middle",margin:"6px"}},n("sequenceNav.acceptingString")),a.createElement(ae.a,{className:Z.sequenceList},e.sequenceList.filter((function(e){return e.accept})).map((function(e){var t=r(e.id);return a.createElement(ee.a,{key:e.value,dense:!0,className:t.className},a.createElement(ne.a,null,a.createElement("i",{className:t.icon})),a.createElement(te.a,{id:e.id,primary:e.value}))}))),a.createElement("h4",{style:{verticalAlign:"middle",margin:"10px 6px 6px 6px"}},n("sequenceNav.notAcceptingString")),a.createElement(ae.a,{className:Z.sequenceList},e.sequenceList.filter((function(e){return!e.accept})).map((function(e){var t=r(e.id);return a.createElement(ee.a,{key:e.value,role:void 0,dense:!0,className:t.className},a.createElement(ne.a,null,a.createElement("i",{className:t.icon})),a.createElement(te.a,{id:e.id,primary:e.value}))}))))},ce=(n(133),n(292));var oe=function(e){var t=Object(d.a)(),n=t.t;return t.i18n,a.createElement(v.a,{container:!0,spacing:0,style:{marginTop:"20px"}},a.createElement(v.a,{item:!0,sm:12},a.createElement(_.a,{elevation:1,style:{padding:"4px 0px 17px 0px",textAlign:"center"}},a.createElement("p",null,a.createElement("span",{style:{fontSize:"22px"}},e.questionText)),a.createElement("span",null,n("questionArea.inputSequences"),"\uff3b ",ce.a(", ")(e.allowInputs)," \uff3d"))))};var ie=function(e){var t=Object(d.a)(),n=t.t,r=(t.i18n,a.useContext(m)),c=Object(a.useState)(!1),o=Object(u.a)(c,2),i=o[0],s=o[1],l=a.createElement(g.a,{variant:"outlined",color:"primary",onClick:e.onSave,style:{marginRight:"10px",width:"75px"}},n("actionBar.save")),p=function(){s(!1),e.onReset()};return a.createElement(v.a,{container:!0,style:{padding:"8px"}},a.createElement(v.a,{item:!0,sm:6},a.createElement(g.a,{variant:"outlined",color:"default",style:{margin:"0px 10px 0px 5px"}},n("actionBar.howToPlay")),a.createElement(g.a,{variant:"outlined",color:"secondary",onClick:function(){return s(!0)}},n("actionBar.reset")),a.createElement(W.a,{open:i},a.createElement(z.a,null,a.createElement(K.a,null,n("actionBar.resetDialog.message"))),a.createElement(F.a,null,a.createElement(g.a,{onClick:function(){return s(!1)},color:"default"},n("common.cancel")),a.createElement(g.a,{onClick:p,variant:"contained",color:"secondary"},n("common.ok"))))),a.createElement(v.a,{item:!0,sm:6,style:{textAlign:"right"}},a.createElement("span",null,r?l:null,a.createElement(g.a,{variant:"contained",color:"primary",onClick:e.onTest,style:{marginRight:"10px",width:"75px"},disabled:e.animationStart},n("actionBar.test")),a.createElement(g.a,{variant:"contained",color:"secondary",style:{marginRight:"7px",width:"75px"},onClick:e.onCancel,disabled:!e.animationStart},n("actionBar.stop")))))},se=n(299),le=n(283),ue=n(284),pe=n(297),fe=n(285),me=n(98),de=n(300),ge=n(293),xe=n(294),ve=n(301),he=n(146),Ee=n(286),ye=n(143);function be(e,t,n){var a=e.x,r=e.y,c=t.x-a,o=t.y-r;return{x:a+(Math.cos(n)*c+Math.sin(n)*o),y:r+(-Math.sin(n)*c+Math.cos(n)*o)}}var _e=n(99),we=n(291),ke=n(94);var Ce=function(e){var t=/^(|[0-9a-z](,$|,[0-9a-z]){0,2})$/g,n=Object(a.useState)("26px"),r=Object(u.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(ce.a(",",e.inputs)),s=Object(u.a)(i,2),l=s[0],p=s[1];Object(a.useEffect)((function(){l.length<2?o("26px"):l.length<4?o("36px"):o("46px")}),[l]);var f=function(){if(e.isSelf)return{x:e.to.x,y:e.to.y-60};var t={x:(e.from.x+e.to.x)/2,y:(e.from.y+e.to.y)/2};return function(e,t,n){var a=e.x,r=e.y,c=t.x-a,o=t.y-r,i=Math.sqrt(Math.pow(c,2)+Math.pow(o,2));return{x:a+n/i*c,y:r+n/i*o}}(t,be(t,e.to,Math.PI/2),22)}(),m=f.x,d=f.y;return a.createElement("g",{id:e.id,name:"transition",onContextMenu:function(t){return e.contextMenuHandler(t,e.id,"transition")},onClick:function(e){return e.stopPropagation()},className:ye.transition},a.createElement("path",{id:e.id+"_path",d:function(){if(e.isSelf){var t={x:e.to.x,y:e.to.y-20},n=be(e.from,t,.2),a=be(e.from,t,-.2),r={x:n.x-20,y:n.y-30},c={x:a.x+20,y:a.y-30};return"M".concat(n.x,",").concat(n.y,"C").concat(r.x,",").concat(r.y,",").concat(c.x,",").concat(c.y,",").concat(a.x,",").concat(a.y)}var o=function(e,t,n){var a=e.x,r=e.y,c=t.x,o=t.y,i=Math.sqrt(Math.pow(c-a,2)+Math.pow(o-r,2)),s=n*((c-a)/i),l=n*((o-r)/i);return{from:{x:s+a,y:l+r},to:{x:c-s,y:o-l}}}(e.from,e.to,e.r),i=o.from,s=o.to,l=be(e.from,i,.15),u=be(e.to,s,-.15);return"M".concat(l.x,",").concat(l.y,"L").concat(u.x,",").concat(u.y)}(),markerEnd:e.markerEnd}),a.createElement("foreignObject",{x:m-15,y:d-16,width:c,height:"35px",id:"foreign_"+e.id},a.createElement(we.a,{onClick:function(t){return e.onInputClickHandler()},variant:"outlined",width:c,maxLength:5,onChange:function(n){var a=n.target.value;if(a.match(t)){var r=a.replace(/,$/,"").split(",");a||(r=[]),_e.a(r).length===r.length&&e.validateInputs(e.index,r)&&(p(a),e.onChangeHandler(e.index,r))}},value:l,onFocus:function(){ke.a("#".concat(e.id)).raise(),ke.a("#".concat(e.id," input")).node().focus()}})))},Se=n(101),Oe=n(298),je=n(110);var Te=function(e){var t=a.createRef();return a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:500,width:"100%",onClick:function(n){var a=t.current.createSVGPoint();a.x=n.clientX,a.y=n.clientY;var r=a.matrixTransform(t.current.getScreenCTM().inverse());e.onClick({x:r.x,y:r.y})},ref:t,style:{border:"solid black 1px",maxWidth:"".concat(660,"px")},onContextMenu:function(e){return e.preventDefault()}},e.children)};var Ie=function(e){var t=0;return Object(a.useEffect)((function(){var t=Object(ke.a)("#"+e.id);Object(Oe.a)().on("drag",(function(t){t.x<0||t.x>660||t.y<0||t.y>500||e.updatePos(e.id,{x:t.x,y:t.y})}))(t)}),[e.states]),a.createElement("g",{id:e.id,name:"state",onClick:function(n){setTimeout((function(){t>0?t--:e.onClickHandler(e.id)}),250),n.stopPropagation()},onDoubleClick:function(){t=2,e.onDoubleClickHandler(e.id)},onContextMenu:e.contextMenuHandler,className:"".concat(Se.state," ").concat(e.acitve?Se.active:Se.normal)},a.createElement("circle",{r:"20",cx:e.x,cy:e.y}),e.accept?a.createElement("circle",{r:"12",cx:e.x,cy:e.y}):null,"stateId_0"===e.id?a.createElement("path",{d:"M".concat(e.x-50,",").concat(e.y,"L").concat(e.x-20,",").concat(e.y),id:"transitionId_0_path",markerEnd:"url(#triangle)",stroke:"black",strokeWidth:"2.5px",style:{padding:"3px"},onClick:function(e){return e.stopPropagation()}}):null)},qe=n(68),Ne=n(144);var Ae=function(e){return e.show?a.createElement(_.a,{elevation:4,onContextMenu:function(e){return e.preventDefault()},style:{left:e.x,top:e.y},className:Ne.contextmenu},a.createElement(ae.a,null,e.items.map((function(t){return a.createElement(ee.a,Object(qe.a)({key:t.name,role:void 0,dense:!0,button:!0,onClick:function(n){return e.itemClickHandler(n,t.name)},name:t.name},"key",t.name),a.createElement(te.a,{id:t.name,primary:t.displayText}))})))):null},Me=n(115);var Pe=function(e){var t=function(e){var t={top:e.top+"px",left:e.left+"px",transform:"rotate(".concat(e.rotate,"deg)")};return r.a.createElement("div",{className:"".concat(Me.dropCommon," ").concat(Me["drop"+e.rotate]),style:t})};return Array(8).map((function(n,a){var c=45*a;return r.a.createElement(t,{rotate:c,top:e.top,left:e.left,index:a})})),r.a.createElement("div",{id:"clearEffect"},r.a.createElement(t,{rotate:0,top:e.top,left:e.left}),r.a.createElement(t,{rotate:45,top:e.top,left:e.left}),r.a.createElement(t,{rotate:90,top:e.top,left:e.left}),r.a.createElement(t,{rotate:135,top:e.top,left:e.left}),r.a.createElement(t,{rotate:180,top:e.top,left:e.left}),r.a.createElement(t,{rotate:225,top:e.top,left:e.left}),r.a.createElement(t,{rotate:270,top:e.top,left:e.left}),r.a.createElement(t,{rotate:315,top:e.top,left:e.left}))};var Le=function(e){var t=Object(d.a)(),n=t.t,c=(t.i18n,Object(a.useState)("")),o=Object(u.a)(c,2),i=o[0],s=o[1],l={show:!1,x:0,y:0,items:[]},p=Object(a.useState)(l),f=Object(u.a)(p,2),m=f[0],g=f[1],x=Object(a.useState)({show:!1,top:0,left:0}),v=Object(u.a)(x,2),h=v[0],E=v[1],y=[{name:"change",displayText:n("contextMenu.change")},{name:"delete",displayText:n("contextMenu.delete")}],b=[{name:"change",displayText:n("contextMenu.change")}],_=[{name:"delete",displayText:n("contextMenu.delete")}],w=function(t,n){var a=n.x,r=n.y,c=se.a(le.a("id",t))(e.states),o=ue.a(e.states[c],{x:a,y:r}),i=pe.a(c,o,e.states);g(l),s(t),e.setStates(i)},k=function(){return e.setCount((function(e){return e+1})),e.count},C=function(t){if(g(l),""===i)s(t);else if(t===i)s("");else{if(s(t),O(i,t))return;var n=e.transitions.concat({id:"transitionId_".concat(k()),fromStateId:i,toStateId:t,inputs:[]});e.setTransitons(n)}},S=function(t){if(g(l),!O(t,t)){var n=e.transitions.concat({id:"transitionId_".concat(k()),fromStateId:t,toStateId:t,inputs:[]});e.setTransitons(n)}},O=function(t,n){var a=fe.a({fromStateId:me.a(t),toStateId:me.a(n)});return de.a(a,e.transitions)},j=function(t,n){var a=ue.a(e.transitions[t],{inputs:n}),r=pe.a(t,a,e.transitions);e.setTransitons(r)},T=function(t,n){if(ge.a(e.allowInputs,n).length!==e.allowInputs.length)return!1;var a=e.transitions[t].fromStateId,r=e.transitions[t].id,c=fe.a({fromStateId:me.a(a),id:xe.a(me.a(r)),inputs:function(e){return 0!==ve.a(e,n).length}});return!de.a(c)(e.transitions)},I=function(e,t){return function(n){var a;a="state"===e?0===t?b:y:_;var r={show:!0,x:n.pageX,y:n.pageY,items:a,itemClickCallback:"state"===e?A(t):M(t)};g(r),n.preventDefault(),n.stopPropagation()}},q=function(){g(l)},N=function(e){return function(t,n){e(n),s(""),g(l),t.stopPropagation()}},A=function(t){return function(n){if("change"===n){var a=ue.a(e.states[t],{accept:!e.states[t].accept});e.setStates(pe.a(t,a,e.states))}else if("delete"===n){var r=e.states[t].id,c=he.a(fe.a({fromStateId:xe.a(me.a(r)),toStateId:xe.a(me.a(r))}),e.transitions);e.setTransitons(c),e.setStates(Ee.a(t,1,e.states))}}},M=function(t){return function(n){"delete"===n&&e.setTransitons(Ee.a(t,1,e.transitions))}};return r.a.createElement("div",{style:{padding:"5px 10px 5px 8px"}},m.show?r.a.createElement(Ae,{show:m.show,items:m.items,x:m.x,y:m.y,itemClickHandler:N(m.itemClickCallback)}):null,h.show?r.a.createElement(Pe,{top:h.top,left:h.left}):null,r.a.createElement(Te,{onClick:function(t){var n=t.x,a=t.y;if(m.show)g(l);else{var r=e.states.concat({id:"stateId_".concat(k()),x:n,y:a,accept:!1});e.setStates(r)}}},r.a.createElement("defs",null,r.a.createElement("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"10",refY:"5",markerUnits:"strokeWidth",markerWidth:"5",markerHeight:"5",orient:"auto"},r.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10",fill:"#333333"})),r.a.createElement("g",{id:"state"},r.a.createElement("circle",{r:"20"})),r.a.createElement("g",{id:"accept"},r.a.createElement("circle",{r:"20"}),r.a.createElement("circle",{r:"15"}))),e.states.map((function(t,n){return r.a.createElement(Ie,{id:t.id,x:t.x,y:t.y,key:t.id,accept:t.accept,acitve:t.id===i,onClickHandler:C,onDoubleClickHandler:S,contextMenuHandler:I("state",n),updatePos:w,states:e.states,index:n})})),e.transitions.map((function(t,n){var a=e.states.filter((function(e){return e.id===t.fromStateId}))[0],c={x:a.x,y:a.y},o=e.states.filter((function(e){return e.id===t.toStateId}))[0],i={x:o.x,y:o.y};return r.a.createElement(Ce,{key:t.id,id:t.id,isSelf:t.fromStateId===t.toStateId,from:c,to:i,r:20,markerEnd:"url(#triangle)",inputs:t.inputs,index:n,validateInputs:T,contextMenuHandler:I("transition",n),onChangeHandler:j,onInputClickHandler:q})})),e.animation(E,(function(t){e.states.find((function(e){return e.id===t}));var n=je.a("#".concat(t)).node().getBoundingClientRect();E({show:!0,top:n.top,left:Number(n.left)+14})}))))};function Be(e){return De.apply(this,arguments)}function De(){return(De=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get("/question/".concat(t));case 3:return n=e.sent,console.log(n),e.abrupt("return",n.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}n(223);var He=n(287),Re=n(302);var We=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],c=n[1],o=a.createRef(),i=a.useRef(e),p=Object(a.useState)({x:0,y:0}),f=Object(u.a)(p,2),m=f[0],d=f[1],g=Object(a.useState)(!1),x=Object(u.a)(g,2),v=x[0],h=x[1],E=[];Object(a.useEffect)((function(){if(e.animationStart){var t=o.current;return console.log(e.animationTarget),e.animationTarget.reduce(function(){var n=Object(l.a)(s.a.mark((function n(a,r,o){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a;case 2:return d({x:0,y:0}),e.setClearEffectInfo({show:!1}),n.next=6,new Promise((function(e){He.a(0,"transitionId_0",r.transitionOrderList).reduce(function(){var e=Object(l.a)(s.a.mark((function e(n,a,o){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return e.next=4,new Promise((function(e){setTimeout((function(){}),50);var n=setTimeout(Object(l.a)(s.a.mark((function n(){return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:0===o&&i.current.updateStatus(r.sequenceId,"playing"),c(a+"_path"),t.beginElement(),e();case 4:case"end":return n.stop()}}),n)}))),0===o?0:800);E.push(n)}));case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Promise.resolve()).then((function(){return e()}))}));case 6:return n.next=8,new Promise((function(t){var n=Re.a(e.animationTarget[o].stateOrderList),a=setTimeout((function(){var t=e.states.find((function(e){return e.id===n}));d({x:t.x,y:t.y})}),800),s=setTimeout((function(){var t=e.animationTarget[o].result?"success":"failed";i.current.updateStatus(r.sequenceId,t),e.animationTarget[o].result?(e.startClearEffect(n),c("")):h(!0)}),1e3),l=setTimeout((function(){if(!e.animationTarget[o].result)return h(!1),void i.current.setAnimationStart(!1);t()}),1800);E.push(a),E.push(s),E.push(l)}));case 8:case"end":return n.stop()}}),n)})));return function(e,t,a){return n.apply(this,arguments)}}(),Promise.resolve()).then((function(){e.setClearEffectInfo({show:!1}),i.current.setAnimationStart(!1),i.current.setClearPopupOpen(!0)})),function(){console.log(E),E.forEach((function(e){return clearTimeout(e)}));var e=se.a(le.a("status","playing"))(i.current.sequences);if(-1!==e){var t=ue.a(i.current.sequences[e])({status:"normal"});i.current.updateStatus(e,t,i.current.sequences)}}}}),[e.animationStart]),Object(a.useEffect)((function(){i.current=e}),[e.sequenceStatusList,e.animationStart]);var y=function(){var e=a.createRef();return Object(a.useEffect)((function(){e.current.beginElement()}),[e]),a.createElement("animate",{ref:e,attributeName:"r",values:"13;0",dur:"0.8s",repeatCount:"1"})};return e.animationStart?a.createElement(a.Fragment,null,a.createElement("circle",{cx:m.x,cy:m.y,r:"13",fill:"pink",style:{display:!r&&"none"}},a.createElement("animateMotion",{ref:o,dur:"".concat(.81,"s"),repeatCount:"1",styles:{display:"none"}},a.createElement("mpath",{xlinkHref:"#"+r})),v?a.createElement(y,null):null)):null};function Fe(e,t){return ze.apply(this,arguments)}function ze(){return(ze=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.post("/test/automaton/".concat(t),n);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var Ke=n(100),Qe=n(289),Ge=n(288);var Je=function(e){var t=Object(d.a)(),n=t.t,r=(t.i18n,Object($.f)());return a.createElement(W.a,{open:e.open,onClose:function(){return e.setOpen(!1)}},a.createElement(_.a,{elevation:4},a.createElement(z.a,null,a.createElement(K.a,{style:{fontSize:"1.1rem"}},a.createElement(Ge.a,{i18nKey:"clearPopup.message",values:{title:e.title}}))),a.createElement(F.a,null,a.createElement(g.a,{onClick:function(){return e.setOpen(!1)},color:"default"},n("common.close")),a.createElement(g.a,{onClick:function(){e.setOpen(!1),r.push("/play/".concat(e.questionId+1))},variant:"contained",color:"primary",disabled:e.questionId>8},n("clearPopup.nextQuestion")))))};var Ue=function(e){var t=r.a.useContext(m),n=e.match.params.questionId,c=Object(a.useState)([]),o=Object(u.a)(c,2),i=o[0],p=o[1],f=Object(a.useState)([]),d=Object(u.a)(f,2),g=d[0],x=d[1],h=Object(a.useState)({questionText:"",allowInputs:[]}),E=Object(u.a)(h,2),y=E[0],b=E[1],w=[{x:60,y:250,id:"stateId_0",accept:!1}],k=Object(a.useState)(w),C=Object(u.a)(k,2),S=C[0],O=C[1],j=Object(a.useState)([]),I=Object(u.a)(j,2),N=I[0],A=I[1],M=Object(a.useState)(1),P=Object(u.a)(M,2),L=P[0],B=P[1],D=Object(a.useState)(!1),H=Object(u.a)(D,2),R=H[0],W=H[1],F=Object(a.useState)([]),z=Object(u.a)(F,2),K=z[0],Q=z[1],G=Object(a.useState)(!1),J=Object(u.a)(G,2),U=J[0],X=J[1];Object(a.useEffect)((function(){(function(){var e=Object(l.a)(s.a.mark((function e(){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Be(n);case 2:if(a=e.sent,p(Ke.a((function(e){return Qe.a(e,{status:"normal"})}))(a.sequences)),b(a),!t){e.next=10;break}return e.next=8,q(n);case 8:(r=e.sent)&&(O(r.states),A(r.transitions),B(r.count));case 10:console.log(a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n,t]);var Y=function(){var e=Object(l.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={states:S,transitions:N},e.next=3,Fe(n,t);case 3:a=e.sent,x(i.map((function(e){return Object({id:e.id,status:"none"})}))),Q(a),W(!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={states:S,transitions:N,count:L},e.next=3,T(n,t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e,t){var n=se.a((function(t){return t.id===e}),g),a=ue.a(g[n],{status:t}),r=pe.a(n,a,g);x(r)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,{questionText:y.questionText,allowInputs:y.allowInputs}),r.a.createElement(v.a,{container:!0,spacing:2},r.a.createElement(v.a,{item:!0,sm:3},r.a.createElement(re,{sequenceList:i,sequenceStatusList:g})),r.a.createElement(v.a,{item:!0,sm:9},r.a.createElement(Je,{open:U,setOpen:X,questionId:n,title:y.title}),r.a.createElement(_.a,{elevation:3,style:{marginTop:"15px"}},r.a.createElement(ie,{onTest:Y,onSave:V,onReset:function(){O(w),A([]),B(1)},onCancel:function(){W(!1),x([])},animationStart:R}),r.a.createElement(Le,{states:S,setStates:O,transitions:N,setTransitons:A,count:L,setCount:B,allowInputs:y.allowInputs,questionId:n,animation:function(e,t){return r.a.createElement(We,{animationStart:R,animationTarget:K,setAnimationStart:W,updateStatus:$,sequences:i,questionId:n,states:S,setClearEffectInfo:e,startClearEffect:t,sequenceStatusList:g,setSequenceStatusList:x,setClearPopupOpen:X})}})))))},Xe=n(45);var Ye=function(e){var t=Object(d.a)(),n=t.t,r=(t.i18n,function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M();case 2:t=e.sent,n=t.state,a=A(n),window.location.href=a;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),c=function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:t=e.sent,n=t.token,a=D(n),window.location.href=a;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a.createElement(W.a,{maxWidth:"sm",open:e.open,onClose:function(){return e.setOpen(!1)}},a.createElement(Q.a,null,n("loginDialog.title")),a.createElement(z.a,null,a.createElement(K.a,null,a.createElement(Ge.a,{i18nKey:"loginDialog.content"}))),a.createElement(ae.a,{style:{margin:"auto"}},a.createElement(ee.a,null,a.createElement(g.a,{onClick:c,variant:"outlined",style:{textTransform:"none",background:"#1DA1F2"},className:"".concat(Xe.loginButton," ").concat(Xe.twitterBg)},a.createElement("i",{className:"fab fa-twitter ".concat(Xe.loginIcon)}),a.createElement("span",{className:Xe.buttonText},n("loginDialog.loginWithTwitter")))),a.createElement(ee.a,null,a.createElement(g.a,{onClick:r,variant:"outlined",style:{textTransform:"none",background:"#DB4437"},className:"".concat(Xe.loginButton," ").concat(Xe.googleBg)},a.createElement("i",{className:"fab fa-google ".concat(Xe.loginIcon)}),a.createElement("span",{className:Xe.buttonText},n("loginDialog.loginWithGoogle"))))))},Ve=n(290);var $e=function(){var e=Object(a.useState)({}),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(u.a)(o,2),p=i[0],f=i[1];return Object(a.useEffect)((function(){(function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement(a.Suspense,{fallback:"loading"},r.a.createElement(m.Provider,{value:n},r.a.createElement(J.a,null,r.a.createElement(Ve.a,{id:"app",style:{background:"#66ddff"},maxWidth:"md"},r.a.createElement(G,{setShowLoginModal:f}),r.a.createElement(Ye,{open:p,setOpen:f}),r.a.createElement("div",{className:"grid-x grid-margin-x"},r.a.createElement($.c,null,r.a.createElement($.a,{path:"/play/:questionId",component:Ue}),r.a.createElement($.a,{path:"/",component:V})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ze=n(117),et=n(43),tt={ja:{translation:{appTitle:"\u30aa\u30fc\u30c8\u30de\u30c8\u30f3\u306e\u30a2\u30d7\u30ea(\u4eee)",header:{logout:"\u30ed\u30b0\u30a2\u30a6\u30c8",removeAccount:"\u30a2\u30ab\u30a6\u30f3\u30c8\u524a\u9664",cancel:"\u30ad\u30e3\u30f3\u30bb\u30eb",removeAccountDialog:{title:"\u30a2\u30ab\u30a6\u30f3\u30c8\u524a\u9664\u306e\u3054\u78ba\u8a8d",message:"\u4f5c\u6210\u3057\u305f\u30aa\u30fc\u30c8\u30de\u30c8\u30f3\u3001\u30af\u30ea\u30a2\u5c65\u6b74\u304c\u524a\u9664\u3055\u308c\u307e\u3059\u3002"}},contextMenu:{change:"\u5909\u66f4",delete:"\u524a\u9664"},actionBar:{howToPlay:"\u30d7\u30ec\u30a4\u65b9\u6cd5",save:"\u4fdd\u5b58",reset:"\u30ea\u30bb\u30c3\u30c8",test:"\u56de\u7b54",stop:"\u4e2d\u6b62",resetDialog:{message:"\u4f5c\u6210\u3057\u305f\u30aa\u30fc\u30c8\u30de\u30c8\u30f3\u3092\u521d\u671f\u5316\u3057\u307e\u3059\u304c\u3088\u308d\u3057\u3044\u3067\u3057\u3087\u3046\u304b\uff1f"}},questionArea:{inputSequences:"\u5165\u529b\u6587\u5b57\u5217\uff1a"},sequenceNav:{acceptingString:"\u53d7\u7406\u3059\u308b\u6587\u5b57\u5217",notAcceptingString:"\u62d2\u5426\u3059\u308b\u6587\u5b57\u5217"},common:{ok:"OK",close:"\u9589\u3058\u308b",cancel:"\u30ad\u30e3\u30f3\u30bb\u30eb"},clearPopup:{title:"Congratulations!!",message:"\u304a\u3081\u3067\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\uff01<br/>{{title}}\u3092\u30af\u30ea\u30a2\u3057\u307e\u3057\u305f\u3002",nextQuestion:"\u6b21\u306e\u554f\u984c\u306b\u9032\u3080"},loginDialog:{title:"\u5916\u90e8\u30b7\u30b9\u30c6\u30e0\u3068\u9023\u643a\u3057\u3066\u30ed\u30b0\u30a4\u30f3",content:"\u4ee5\u4e0b\u306e\u6a5f\u80fd\u304c\u5229\u7528\u3067\u304d\u307e\u3059\u3002<br/>\u30fb\u4f5c\u6210\u3057\u305f\u30aa\u30fc\u30c8\u30de\u30c8\u30f3\u306e\u4fdd\u5b58<br/> \u30fb\u30af\u30ea\u30a2\u5c65\u6b74\u306e\u4fdd\u5b58",loginWithGoogle:"Google\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3",loginWithTwitter:"Twitter\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3"}}}};Ze.a.use(et.e).init({resources:tt,lng:"ja",fallbackLng:"ja",debug:!0,interpolation:{escapeValue:!1}});Ze.a;o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},45:function(e,t,n){e.exports={loginButton:"LoginDialog_loginButton__36J-h",loginIcon:"LoginDialog_loginIcon__182Sa",buttonText:"LoginDialog_buttonText__2PPMY"}},58:function(e,t,n){e.exports={sequenceList:"SequenceNav_sequenceList__1kx2u",bgSuccess:"SequenceNav_bgSuccess__1ehTQ",bgFailed:"SequenceNav_bgFailed__wboLr",bgPlaying:"SequenceNav_bgPlaying__3-eIN",playingAnimation:"SequenceNav_playingAnimation__2BToI",anim_sc:"SequenceNav_anim_sc__bCJ0H"}}},[[188,1,2]]]);
//# sourceMappingURL=main.45d453f5.chunk.js.map